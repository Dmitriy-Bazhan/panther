<div>
    <h1>Booking</h1>

    <table>
        <thead>
        <tr>
            <th>Client</th>
            <th>One time or regular</th>
            <th>Start Data</th>
            <th>Create Date</th>
            <th>Is set alternative</th>
            <th>Action</th>
        </tr>
        </thead>
        <tbody>
        <tr v-if="bookings.length > 0" v-for="booking in bookings">
            <th>{{ booking.nurse.first_name + ' ' + booking.nurse.last_name}}</th>
            <th>{{ $t(booking.one_time_or_regular) }}</th>
            <th>{{ booking.start_date }}</th>
            <th>{{ booking.created_at.split('T')[0] }}</th>
            <th>{{ $t(booking.have_alternative) }}</th>
            <th>
                <button class="btn btn-sm btn-success" v-on:click="showCurrentBooking(booking)">
                    {{ $t('show_and_edit') }}
                </button>&nbsp;
                <button v-if="booking.have_alternative === 'yes'" class="btn btn-sm btn-success" v-on:click="showCurrentAlternativeBooking(booking)">
                    {{ $t('show_alternative') }}
                </button>&nbsp;
                <button v-else class="btn btn-sm btn-secondary">{{ $t('show_alternative') }}</button>&nbsp;
                <button class="btn btn-sm btn-success" v-on:click="showChatWithNurse(booking.nurse)">
                    {{ $t('send_message') }}
                </button>&nbsp;
                <button class="btn btn-sm btn-success" v-on:click="deleteBooking(booking.id)">{{ $t('remove') }}</button>
            </th>
        </tr>
        </tbody>
    </table>

    <div v-if="show_booking" class="show-booking-wrapper">
        <div class="container-fluid">
            <h2>{{ $t('booking_from_nurse') + ': ' + booking.nurse.first_name + ' ' + booking.nurse.last_name}}</h2>
            <div class="row">
                <div class="col-2 offset-10">
                    <button class="btn btn-sm btn-success" v-on:click="closeModal()">{{ $t('close') }}</button>
                </div>

            </div>
            <br>
            <div class="row">
                <booking :booking="booking"></booking>
            </div>
            <div class="row">
                <div class="col-2 offset-10">
                    <button class="btn btn-sm btn-success" v-on:click="updateBooking()">{{ $t('update') }}</button>&nbsp;
                </div>
            </div>
        </div>
    </div>

    <div v-if="show_chat" class="single-chat-wrapper">
        <div class="container-fluid">
            <h2>Single Chat with {{ nurse.first_name + ' ' + nurse.last_name}}</h2>
            <div class="row">
                <div class="col-2 offset-10">
                    <button class="btn btn-sm btn-success" v-on:click="closeModal()">{{ $t('close') }}</button>
                </div>

            </div>
            <br>
            <div class="row">
                <single_chat :nurse="nurse" :data="data" :client="user"></single_chat>
            </div>
        </div>
    </div>

    <div v-if="show_alternative" class="single-chat-wrapper">
        <div class="container-fluid">
            <h2>{{ $t('alternative_booking_from_nurse') + ': ' + booking.nurse.first_name + ' ' + booking.nurse.last_name}}</h2>
            <div class="row">
                <div class="col-2 offset-10">
                    <button class="btn btn-sm btn-success" v-on:click="closeModal()">{{ $t('close') }}</button>
                </div>

            </div>
            <br>
            <div class="row">
                <alternative :booking="booking"></alternative>
            </div>
            <div class="row">
                <div class="col-2 offset-10">
                    <button class="btn btn-sm btn-success" v-on:click="agreeWithAlternativeBooking()">{{ $t('agree') }}</button>&nbsp;
                </div>
            </div>
        </div>
    </div>
</div>
